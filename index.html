<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Zhuomin 攀岩记录</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="main.css" />
</head>
<body>
  <div class="page">
    <header>
      <h1>Zhuomin 攀岩记录</h1>
      <p>记录每一次攀岩的日期、内容和达成情况，方便长期对比和回顾。</p>
    </header>


    <!-- 🔐 登录区域 -->
    <section class="card" id="auth-card">
      <div class="auth-row">
        <span id="auth-status">未登录</span>
      </div>
      <div class="auth-row">
        <input
          type="email"
          id="auth-email"
          placeholder="登录邮箱"
          autocomplete="email"
        />
        <input
          type="password"
          id="auth-password"
          placeholder="密码"
          autocomplete="current-password"
        />
        <button id="auth-login-btn" class="btn-secondary">登录</button>
        <button id="auth-logout-btn" class="btn-secondary" style="display:none;">
          退出登录
        </button>
      </div>
      <p class="note">
        说明：未登录时只能查看记录，登录后才可以新增、编辑和删除攀岩记录。
      </p>
    </section>


    <!-- 自动生成的 2025 攀岩日历（带月份 tab） -->
    <section class="card">
      <h2 class="card-title">
        <span class="icon">📅</span>
        攀岩日历（2025）
      </h2>

      <!-- 月份 tab -->
      <div class="month-tabs" id="month-tabs-2025">
        <button class="month-tab active" data-month="0">1 月</button>
        <button class="month-tab" data-month="1">2 月</button>
        <button class="month-tab" data-month="2">3 月</button>
        <button class="month-tab" data-month="3">4 月</button>
        <button class="month-tab" data-month="4">5 月</button>
        <button class="month-tab" data-month="5">6 月</button>
        <button class="month-tab" data-month="6">7 月</button>
        <button class="month-tab" data-month="7">8 月</button>
        <button class="month-tab" data-month="8">9 月</button>
        <button class="month-tab" data-month="9">10 月</button>
        <button class="month-tab" data-month="10">11 月</button>
        <button class="month-tab" data-month="11">12 月</button>
      </div>

      <!-- 这里会由 JS 动态生成每个月的日历 -->
      <div id="calendar-2025"></div>
    </section>


    <!-- 原来的攀岩训练明细表格 -->
    <section class="card">
      <h2 class="card-title">
        <span class="icon">🧗‍♀️</span>
        攀岩训练明细（持续更新）
      </h2>

      <!-- 按钮区域 -->
      <div style="margin-bottom: 10px; display: flex; gap: 8px; flex-wrap: wrap;">
        <button id="add-row-btn" class="btn-secondary">+ 新增一行记录</button>
        <button id="save-new-rows-btn" class="btn-secondary">💾 保存新记录到云端</button>
        <button id="save-edits-btn" class="btn-secondary">✅ 保存已修改行</button>
        <button id="delete-selected-btn" class="btn-secondary">🗑 删除当前选中行</button>
        <button id="generate-share-btn" class="btn-secondary" style="display:none;">
          🔗 生成分享链接
        </button>
        <button id="copy-share-btn" class="btn-secondary" style="display:none;">
          📋 复制分享链接
        </button>
        <span id="share-link-preview" style="font-size:12px;color:var(--text-sub);"></span>
      </div>

      <table class="log-table">
        <thead>
          <tr>
            <th style="width: 40px;">序号</th>
            <th style="width: 90px;">日期</th>
            <th style="width: 80px;">时长</th>
            <th>主要内容</th>
            <th style="width: 150px;">达成情况</th>
            <th style="width: 130px;">备注</th>
          </tr>
        </thead>
        <tbody id="log-tbody">
        </tbody>
      </table>
    </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabase-client.js"></script>
  <script src="calendar.js"></script>
  <script src="logs.js"></script>
  <script src="auth.js"></script>
  <script src="share.js"></script>

</body>
</html>